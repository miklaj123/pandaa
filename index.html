<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Wyszukiwanie w danych CSV</title>
    <style>
        /* Stylizacja */
    </style>
</head>
<body>
<div class="container">
    <h1>Wyszukiwanie danych</h1>
    <div>
        <input type="text" id="searchInput" placeholder="Szukaj...">
        <button onclick="searchInCsv()">Szukaj</button>
    </div>
    <table id="resultsTable">
        <thead>
            <tr>
                <th>Imię</th>
                <th>Nazwisko</th>
                <th>Miasto</th>
                <th>Adres</th>
                <th>Telefon</th>
            </tr>
        </thead>
        <tbody id="resultsBody">
        </tbody>
    </table>
</div>

<script>
function searchInCsv() {
    const searchQuery = document.getElementById('searchInput').value.toLowerCase();
    if (!searchQuery) {
        alert('Wpisz szukaną frazę.');
        return;
    }

    fetch('Pandabuy-Email.csv')
        .then(response => response.text())
        .then(text => {
            const lines = text.split('\n');
            const results = lines.filter(line => line.toLowerCase().includes(searchQuery));
            displayResults(results);
        })
        .catch(error => {
            console.error('Błąd:', error);
        });
}

function displayResults(results) {
    const resultsBody = document.getElementById('resultsBody');
    resultsBody.innerHTML = ''; // Czyszczenie wyników

    results.forEach(result => {
        const columns = result.split(',');
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${columns[2]}</td>
            <td>${columns[3]}</td>
            <td>${columns[7]}</td>
            <td>${columns[8]}</td>
            <td>${columns[10]}</td>
        `;
        resultsBody.appendChild(row);
    });

    if (results.length === 0) {
        resultsBody.innerHTML = '<tr><td colspan="5">Brak wyników</td></tr>';
    }
}
</script>
</body>
</html>
